<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>東北櫻花攝影之旅 2026 | 互動式行程規劃</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #e63946;
            --secondary-color: #a8dadc;
            --accent-color: #457b9d;
            --light-color: #f1faee;
            --dark-color: #1d3557;
            --text-color: #333;
            --border-radius: 12px;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans TC', 'Microsoft JhengHei', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #f8f9fa;
            padding-top: 70px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* Header & Navigation */
        header {
            background-color: white;
            box-shadow: var(--shadow);
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo i {
            color: var(--accent-color);
        }
        
        .nav-links {
            display: flex;
            gap: 25px;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--dark-color);
            font-weight: 500;
            padding: 8px 12px;
            border-radius: var(--border-radius);
            transition: var(--transition);
        }
        
        .nav-links a:hover {
            background-color: var(--secondary-color);
            color: var(--dark-color);
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--dark-color);
            cursor: pointer;
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(29, 53, 87, 0.85), rgba(29, 53, 87, 0.9)), 
                        url('https://images.unsplash.com/photo-1528164344705-47542687000d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            padding: 80px 0;
            text-align: center;
            border-radius: var(--border-radius);
            margin-bottom: 40px;
        }
        
        .hero h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 30px;
            opacity: 0.9;
        }
        
        .trip-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        
        .summary-card {
            background-color: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: var(--border-radius);
            text-align: center;
        }
        
        .summary-card i {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--secondary-color);
        }
        
        .summary-card h3 {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }
        
        /* Budget Section */
        .budget-section {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: var(--shadow);
        }
        
        .budget-section h2 {
            color: var(--dark-color);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--secondary-color);
        }
        
        .budget-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .budget-item {
            padding: 15px;
            border-radius: var(--border-radius);
            background-color: var(--light-color);
        }
        
        .budget-item h3 {
            font-size: 1.1rem;
            margin-bottom: 10px;
            color: var(--accent-color);
        }
        
        .budget-bar {
            height: 25px;
            background-color: #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .budget-fill {
            height: 100%;
            border-radius: 12px;
        }
        
        .accommodation-fill { background-color: var(--accent-color); width: 35%; }
        .transport-fill { background-color: var(--primary-color); width: 25%; }
        .food-fill { background-color: #4caf50; width: 30%; }
        .attractions-fill { background-color: #ff9800; width: 10%; }
        
        /* Itinerary Section */
        .itinerary-section {
            margin-bottom: 50px;
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            color: var(--dark-color);
        }
        
        .section-title i {
            font-size: 1.8rem;
            color: var(--primary-color);
        }
        
        .day-selector {
            display: flex;
            overflow-x: auto;
            gap: 10px;
            margin-bottom: 30px;
            padding-bottom: 15px;
            scrollbar-width: thin;
        }
        
        .day-tab {
            min-width: 120px;
            padding: 15px 20px;
            background-color: white;
            border: 2px solid var(--secondary-color);
            border-radius: var(--border-radius);
            cursor: pointer;
            text-align: center;
            transition: var(--transition);
            font-weight: 600;
            white-space: nowrap;
        }
        
        .day-tab:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }
        
        .day-tab.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .day-content {
            display: none;
            background-color: white;
            border-radius: var(--border-radius);
            padding: 30px;
            box-shadow: var(--shadow);
        }
        
        .day-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .day-theme {
            font-size: 1.1rem;
            color: var(--accent-color);
            background-color: var(--light-color);
            padding: 8px 15px;
            border-radius: 20px;
        }
        
        .timeline {
            position: relative;
            padding-left: 30px;
        }
        
        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background-color: var(--secondary-color);
            border-radius: 2px;
        }
        
        .timeline-item {
            position: relative;
            margin-bottom: 30px;
            padding-left: 20px;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -34px;
            top: 5px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background-color: var(--primary-color);
            border: 3px solid white;
            box-shadow: 0 0 0 3px var(--secondary-color);
        }
        
        .time-badge {
            display: inline-block;
            background-color: var(--light-color);
            color: var(--accent-color);
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .location-card {
            background-color: #f8f9fa;
            border-radius: var(--border-radius);
            padding: 20px;
            border-left: 4px solid var(--accent-color);
        }
        
        .location-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .location-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark-color);
        }
        
        .location-actions {
            display: flex;
            gap: 10px;
        }
        
        .map-btn, .route-btn {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            transition: var(--transition);
        }
        
        .map-btn {
            background-color: var(--secondary-color);
            color: var(--dark-color);
        }
        
        .route-btn {
            background-color: var(--primary-color);
            color: white;
        }
        
        .map-btn:hover, .route-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        
        .location-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .detail-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .detail-item i {
            color: var(--accent-color);
            width: 20px;
        }
        
        .alternatives {
            margin-top: 20px;
            padding: 15px;
            background-color: #fff8e1;
            border-radius: var(--border-radius);
            border-left: 4px solid #ffb300;
        }
        
        .alternatives h4 {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #e65100;
            margin-bottom: 10px;
        }
        
        .checklist {
            background-color: #e8f5e9;
            padding: 20px;
            border-radius: var(--border-radius);
            margin-top: 30px;
        }
        
        .checklist h4 {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #2e7d32;
            margin-bottom: 15px;
        }
        
        .checklist-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }
        
        .checklist-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .checklist-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }
        
        /* Map Preview */
        .map-section {
            margin-bottom: 50px;
        }
        
        .map-container {
            height: 500px;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-top: 20px;
        }
        
        /* Controls & Actions */
        .controls-section {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 50px;
            box-shadow: var(--shadow);
        }
        
        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .action-btn {
            padding: 12px 25px;
            border-radius: var(--border-radius);
            text-decoration: none;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: var(--transition);
        }
        
        .print-btn {
            background-color: var(--dark-color);
            color: white;
        }
        
        .export-btn {
            background-color: var(--accent-color);
            color: white;
        }
        
        .save-btn {
            background-color: #4caf50;
            color: white;
        }
        
        .action-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        
        /* Footer */
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 40px 0;
            text-align: center;
        }
        
        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .footer-links {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .footer-links a {
            color: var(--secondary-color);
            text-decoration: none;
            transition: var(--transition);
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        /* Responsive Design */
        @media (max-width: 992px) {
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .nav-links {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background-color: white;
                flex-direction: column;
                padding: 20px;
                box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            }
            
            .nav-links.active {
                display: flex;
            }
            
            .mobile-menu-btn {
                display: block;
            }
        }
        
        @media (max-width: 768px) {
            .hero {
                padding: 60px 0;
            }
            
            .hero h1 {
                font-size: 1.8rem;
            }
            
            .day-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .location-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .location-actions {
                width: 100%;
                justify-content: flex-start;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container nav-container">
            <div class="logo">
                <i class="fas fa-map-marked-alt"></i>
                <span>東北櫻花之旅</span>
            </div>
            <button class="mobile-menu-btn" id="mobileMenuBtn">
                <i class="fas fa-bars"></i>
            </button>
            <nav class="nav-links" id="navLinks">
                <a href="#overview">行程總覽</a>
                <a href="#itinerary">每日行程</a>
                <a href="#map">路線地圖</a>
                <a href="#budget">預算分析</a>
                <a href="#controls">工具與下載</a>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>東北櫻花與文化攝影之旅 2026</h1>
            <p>2026年4月15日 - 2026年4月21日 | 仙台 · 會津若松 · 白石川 · 山形山寺 | 2位攝影愛好者</p>
            
            <div class="trip-summary">
                <div class="summary-card">
                    <i class="fas fa-calendar-alt"></i>
                    <h3>7天6夜</h3>
                    <p>輕鬆深度遊</p>
                </div>
                <div class="summary-card">
                    <i class="fas fa-train"></i>
                    <h3>大眾運輸</h3>
                    <p>JR PASS 省時省錢</p>
                </div>
                <div class="summary-card">
                    <i class="fas fa-yen-sign"></i>
                    <h3>每人10萬日圓</h3>
                    <p>含住宿與飲食</p>
                </div>
                <div class="summary-card">
                    <i class="fas fa-camera"></i>
                    <h3>攝影主題</h3>
                    <p>櫻花、文化、自然</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Budget Section -->
    <section class="budget-section" id="budget">
        <div class="container">
            <h2><i class="fas fa-chart-pie"></i> 預算分配概算 (每人)</h2>
            <div class="budget-grid">
                <div class="budget-item">
                    <h3>住宿 (35,000日圓)</h3>
                    <div class="budget-bar">
                        <div class="budget-fill accommodation-fill"></div>
                    </div>
                    <p>6晚，平均每晚約5,800日圓</p>
                </div>
                <div class="budget-item">
                    <h3>交通 (25,000日圓)</h3>
                    <div class="budget-bar">
                        <div class="budget-fill transport-fill"></div>
                    </div>
                    <p>含JR東日本鐵路周遊券5日券</p>
                </div>
                <div class="budget-item">
                    <h3>飲食 (30,000日圓)</h3>
                    <div class="budget-bar">
                        <div class="budget-fill food-fill"></div>
                    </div>
                    <p>每日約4,000-5,000日圓</p>
                </div>
                <div class="budget-item">
                    <h3>門票/體驗 (10,000日圓)</h3>
                    <div class="budget-bar">
                        <div class="budget-fill attractions-fill"></div>
                    </div>
                    <p>水族館、寺社參拜等</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Itinerary Section -->
    <section class="itinerary-section" id="itinerary">
        <div class="container">
            <div class="section-title">
                <i class="fas fa-route"></i>
                <h2>每日詳細行程</h2>
            </div>
            
            <!-- Day Selector -->
            <div class="day-selector" id="daySelector">
                <!-- Day tabs will be generated by JavaScript -->
            </div>
            
            <!-- Day Content -->
            <div id="dayContentContainer">
                <!-- Day content will be generated by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Map Section -->
    <section class="map-section" id="map">
        <div class="container">
            <div class="section-title">
                <i class="fas fa-map"></i>
                <h2>行程路線地圖</h2>
            </div>
            <div class="map-container" id="mapContainer">
                <!-- Map will be loaded by JavaScript -->
                <div style="padding: 30px; text-align: center; color: #666;">
                    <i class="fas fa-map-marked-alt" style="font-size: 3rem; margin-bottom: 15px; color: #a8dadc;"></i>
                    <h3>互動式行程地圖</h3>
                    <p>地圖將顯示所有行程地點與移動路線</p>
                    <p><small>實際使用時可嵌入 Google Maps 或 Mapbox</small></p>
                </div>
            </div>
        </div>
    </section>

    <!-- Controls & Actions -->
    <section class="controls-section" id="controls">
        <div class="container">
            <div class="section-title">
                <i class="fas fa-tools"></i>
                <h2>工具與下載</h2>
            </div>
            
            <h3>快速修改指南</h3>
            <ul style="margin-bottom: 20px; padding-left: 20px;">
                <li><strong>加站</strong>：若體力充沛，可在 Day 3 下午加入「仙台城跡」或「大崎八幡宮」</li>
                <li><strong>減站</strong>：若想更輕鬆，可省略「觀音寺川」或「伊佐須美神社」</li>
                <li><strong>改交通</strong>：可考慮利用飯店宅配服務將大件行李直接寄送至下一站飯店</li>
                <li><strong>改時程</strong>：每日出發時間可彈性延後至9:30或10:00，保持輕鬆節奏</li>
            </ul>
            
            <h3>風險管理提醒</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px; margin-top: 15px;">
                <div style="background-color: #ffebee; padding: 15px; border-radius: 8px; border-left: 4px solid #f44336;">
                    <h4><i class="fas fa-cloud-rain"></i> 天候風險</h4>
                    <p>櫻花花期可能受天氣影響</p>
                </div>
                <div style="background-color: #fff3e0; padding: 15px; border-radius: 8px; border-left: 4px solid #ff9800;">
                    <h4><i class="fas fa-users"></i> 擁擠風險</h4>
                    <p>熱門景點可能排隊</p>
                </div>
                <div style="background-color: #e8f5e9; padding: 15px; border-radius: 8px; border-left: 4px solid #4caf50;">
                    <h4><i class="fas fa-subway"></i> 交通風險</h4>
                    <p>JR班次可能延誤</p>
                </div>
            </div>
            
            <div class="action-buttons">
                <a href="#" class="action-btn print-btn" id="printBtn">
                    <i class="fas fa-print"></i> 列印行程
                </a>
                <a href="#" class="action-btn export-btn" id="exportBtn">
                    <i class="fas fa-file-export"></i> 匯出為 JSON
                </a>
                <a href="#" class="action-btn save-btn" id="saveBtn">
                    <i class="fas fa-save"></i> 儲存為 PDF
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container footer-content">
            <div class="logo">
                <i class="fas fa-map-marked-alt"></i>
                <span>東北櫻花之旅</span>
            </div>
            <p>專業旅遊行程設計 | 2026年4月 | 日本東北地區</p>
            <div class="footer-links">
                <a href="#"><i class="fas fa-info-circle"></i> 關於此行程</a>
                <a href="#"><i class="fas fa-question-circle"></i> 常見問題</a>
                <a href="#"><i class="fas fa-envelope"></i> 聯絡我們</a>
                <a href="#"><i class="fas fa-shield-alt"></i> 隱私政策</a>
            </div>
            <p style="font-size: 0.9rem; opacity: 0.8; margin-top: 20px;">
                此行程僅供參考，實際情況可能因天氣、交通、景點開放時間等因素而調整。請在出發前確認最新資訊。
            </p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Mobile menu toggle
        document.getElementById('mobileMenuBtn').addEventListener('click', function() {
            document.getElementById('navLinks').classList.toggle('active');
        });
        
        // Close mobile menu when clicking a link
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', () => {
                document.getElementById('navLinks').classList.remove('active');
            });
        });
        
        // Itinerary Data
        const itineraryData = {
            days: [
                {
                    dayNumber: 1,
                    date: "2026-04-15 (週三)",
                    theme: "仙台抵達與市區初探",
                    accommodation: "仙台市區飯店",
                    stops: [
                        {
                            time: "15:30 - 16:30",
                            name: "仙台機場",
                            description: "辦理入境、領取JR PASS兌換券（如需）、購買Suica卡。",
                            transport: "仙台機場Access線",
                            cost: "650日圓",
                            mapLink: "https://goo.gl/maps/...",
                            routeLink: "https://www.google.com/maps/dir/仙台空港/仙台駅",
                            coordinates: "38.1397, 140.9169",
                            notes: "",
                            alternatives: []
                        },
                        {
                            time: "18:30 - 20:00",
                            name: "利久牛舌 仙台駅店",
                            description: "品嚐仙台名物牛舌。預估費用：每人 3,000-4,000 日圓。",
                            transport: "步行",
                            cost: "3,000-4,000日圓",
                            mapLink: "https://goo.gl/maps/ksP9b7Z4gLp6sTtS9",
                            routeLink: "",
                            coordinates: "38.2600, 140.8824",
                            notes: "仙台站內或周邊有多家名店。",
                            alternatives: ["其他站內牛舌店如「伊達の牛たん」"]
                        }
                    ],
                    checklist: ["護照", "現金/信用卡", "JR PASS兌換單", "網路分享器/SIM卡", "飯店預訂確認信"],
                    alternativesNote: "若提早抵達，可先至飯店寄放行李後，前往仙台城跡眺望市景。"
                },
                {
                    dayNumber: 2,
                    date: "2026-04-16 (週四)",
                    theme: "白石川一目千本櫻攝影日",
                    accommodation: "仙台市區飯店",
                    stops: [
                        {
                            time: "09:00 - 09:50",
                            name: "仙台 → 大河原",
                            description: "使用JR PASS，搭乘JR東北本線（往福島方向）至大河原站。",
                            transport: "JR東北本線",
                            cost: "0 (使用JR PASS)",
                            mapLink: "https://goo.gl/maps/...",
                            routeLink: "https://www.google.com/maps/dir/仙台駅/大河原駅",
                            coordinates: "",
                            notes: "車程約40-50分鐘。",
                            alternatives: []
                        },
                        {
                            time: "10:00 - 15:00",
                            name: "白石川堤 一目千本櫻",
                            description: "從大河原站步行5分鐘即達河堤。綿延約3公里的櫻花隧道，可沿河岸漫步至船岡站。",
                            transport: "步行",
                            cost: "免費",
                            mapLink: "https://goo.gl/maps/KpENeMXp4fVvuNDb7",
                            routeLink: "https://www.google.com/maps/dir/一目千本櫻/仙台海洋森林水族館",
                            coordinates: "37.9988, 140.7221",
                            notes: "空拍注意：請務必遵守日本無人機法規，確認是否為禁飛區，並遠離人群。",
                            alternatives: ["若花期不佳，改往船岡城址公園"]
                        }
                    ],
                    checklist: ["JR PASS", "相機/空拍機", "備用電池", "記憶卡", "雨具", "水"],
                    alternativesNote: "若下雨或櫻花未滿開，可改前往仙台市博物館或大崎八幡宮參觀。"
                },
                {
                    dayNumber: 3,
                    date: "2026-04-17 (週五)",
                    theme: "仙台文化與美食日",
                    accommodation: "仙台市區飯店",
                    stops: [
                        {
                            time: "09:30 - 12:00",
                            name: "仙台水族館 或 瑞鳳殿",
                            description: "選項A: 若前日未去，上午前往水族館。選項B: 伊達政宗靈屋，莊嚴寧靜。",
                            transport: "地下鐵/步行",
                            cost: "水族館: 2,500日圓 / 瑞鳳殿: 570日圓",
                            mapLink: "https://goo.gl/maps/pQv8sMhVQ7TVt5ez8",
                            routeLink: "",
                            coordinates: "38.2682, 141.0211",
                            notes: "瑞鳳殿開放時間: 09:00-16:30",
                            alternatives: []
                        },
                        {
                            time: "14:00 - 16:00",
                            name: "觀音寺川 / 蠶養神社",
                            description: "搭乘JR仙石線至陸前原之町站，步行前往。觀音寺川兩岸櫻花，附近的蠶養神社也是必訪點。",
                            transport: "JR仙石線 + 步行",
                            cost: "免費",
                            mapLink: "https://goo.gl/maps/sAkQfYm5qkDy8pRD8",
                            routeLink: "https://www.google.com/maps/dir/仙台駅/観音寺川",
                            coordinates: "38.2763, 140.9928",
                            notes: "",
                            alternatives: ["下午可改去東照宮或大崎八幡宮"]
                        }
                    ],
                    checklist: ["地下鐵一日券", "購物清單", "舒適的步行鞋"],
                    alternativesNote: "若疲累，可延長購物時間，晚餐後直接回飯店。"
                },
                {
                    dayNumber: 4,
                    date: "2026-04-18 (週六)",
                    theme: "山寺參拜與移動至會津若松",
                    accommodation: "會津若松市區飯店",
                    stops: [
                        {
                            time: "08:30 - 09:30",
                            name: "仙台 → 山形 → 山寺",
                            description: "使用JR PASS，搭乘山形新幹線「翼」號至山形站，轉乘JR仙山線至山寺站。",
                            transport: "JR新幹線 + JR仙山線",
                            cost: "0 (使用JR PASS)",
                            mapLink: "https://goo.gl/maps/...",
                            routeLink: "https://www.google.com/maps/dir/仙台駅/山寺駅",
                            coordinates: "",
                            notes: "總車程約45-55分鐘。",
                            alternatives: []
                        },
                        {
                            time: "10:00 - 13:00",
                            name: "山寺（寶珠山立石寺）",
                            description: "從車站步行5分鐘至山門。約需攀登1,015級石階，上下加參觀需2-3小時。",
                            transport: "步行",
                            cost: "參拜費300日圓",
                            mapLink: "https://goo.gl/maps/sM5gW1LJtAtMkqR16",
                            routeLink: "https://www.google.com/maps/dir/山寺駅/会津若松駅",
                            coordinates: "38.3098, 140.4340",
                            notes: "階梯濕滑，請穿防滑鞋。",
                            alternatives: ["若不想爬山，可只參觀山寺下層的寺院區域"]
                        }
                    ],
                    checklist: ["JR PASS", "防滑運動鞋", "輕便背包", "水", "車站便當"],
                    alternativesNote: "若錯過轉乘班次，下一班車可能需等待較久，請隨時查閱乘換案內App。"
                },
                {
                    dayNumber: 5,
                    date: "2026-04-19 (週日)",
                    theme: "會津若松歷史文化巡禮",
                    accommodation: "會津若松市區飯店",
                    stops: [
                        {
                            time: "09:00 - 10:00",
                            name: "飯店 → 鶴ヶ城",
                            description: "搭乘周遊巴士「Haikara-san」至「鶴ヶ城北口」下車。",
                            transport: "會津周遊巴士",
                            cost: "一日券600日圓",
                            mapLink: "https://goo.gl/maps/khS5mUsGsBmPKYvF8",
                            routeLink: "",
                            coordinates: "37.4877, 139.9297",
                            notes: "天守閣開放時間: 08:30-17:00",
                            alternatives: []
                        },
                        {
                            time: "14:30 - 16:00",
                            name: "會津武家屋敷",
                            description: "重建的武士宅邸，展示當時生活。",
                            transport: "周遊巴士",
                            cost: "850日圓",
                            mapLink: "https://goo.gl/maps/qAQxxn2VcttBKkqW8",
                            routeLink: "",
                            coordinates: "37.4780, 139.9425",
                            notes: "開放時間: 08:30-17:00",
                            alternatives: ["可加訪飯盛山（白虎隊墓地）"]
                        }
                    ],
                    checklist: ["周遊巴士一日券", "相機", "保暖外套（山區較涼）"],
                    alternativesNote: "在七日町可參加會津繪蠟燭或漆器彩繪體驗（需預約）。"
                },
                {
                    dayNumber: 6,
                    date: "2026-04-20 (週一)",
                    theme: "會津神社巡禮與返回仙台",
                    accommodation: "仙台市區飯店",
                    stops: [
                        {
                            time: "09:00 - 10:30",
                            name: "會津若松 → 伊佐須美神社",
                            description: "從會津若松站搭乘會津巴士至「伊佐須美神社前」下車，車程約50分鐘。",
                            transport: "會津巴士",
                            cost: "單程約1,000日圓",
                            mapLink: "https://goo.gl/maps/QodF6Bv8icvUYKUJ7",
                            routeLink: "",
                            coordinates: "37.5524, 139.8032",
                            notes: "班次較少，請提前查詢。或考慮計程車（約30分鐘，5,000日圓左右）。",
                            alternatives: []
                        },
                        {
                            time: "10:30 - 12:00",
                            name: "伊佐須美神社參拜",
                            description: "東北最古老的神社之一，氛圍清幽神聖。",
                            transport: "步行",
                            cost: "免費",
                            mapLink: "https://goo.gl/maps/QodF6Bv8icvUYKUJ7",
                            routeLink: "https://www.google.com/maps/dir/会津若松駅/仙台駅",
                            coordinates: "37.5524, 139.8032",
                            notes: "",
                            alternatives: ["若時間緊張，可略過此點，改逛會津若松站前商圈"]
                        }
                    ],
                    checklist: ["JR PASS", "巴士時刻表（或預約計程車）", "輕便行李"],
                    alternativesNote: "前往伊佐須美神社強烈建議預約計程車（飯店可協助），以控制時間。"
                },
                {
                    dayNumber: 7,
                    date: "2026-04-21 (週二)",
                    theme: "仙台最終採購與歸途",
                    accommodation: "無 (返程)",
                    stops: [
                        {
                            time: "上午",
                            name: "自由時間 / 最終採購",
                            description: "可前往仙台站內的「ずんだ茶寮」購買枝豆甜點，或到地下街「おみやげ広場」補齊土產。",
                            transport: "步行",
                            cost: "視購物情況",
                            mapLink: "",
                            routeLink: "",
                            coordinates: "",
                            notes: "",
                            alternatives: []
                        },
                        {
                            time: "14:00 - 15:00",
                            name: "前往仙台機場",
                            description: "搭乘機場Access線（約25分鐘）。請提前2-2.5小時抵達機場。",
                            transport: "仙台機場Access線",
                            cost: "650日圓",
                            mapLink: "",
                            routeLink: "https://www.google.com/maps/dir/仙台駅/仙台空港",
                            coordinates: "",
                            notes: "",
                            alternatives: ["若航班較晚，可考慮前往榴岡公園（櫻花名所）散步"]
                        }
                    ],
                    checklist: ["所有行李", "土產", "護照", "機票", "免稅品購買單據"],
                    alternativesNote: ""
                }
            ]
        };
        
        // Render Day Selector
        const daySelector = document.getElementById('daySelector');
        itineraryData.days.forEach(day => {
            const dayTab = document.createElement('div');
            dayTab.className = 'day-tab';
            dayTab.textContent = `Day ${day.dayNumber}`;
            dayTab.dataset.day = day.dayNumber;
            
            dayTab.addEventListener('click', () => {
                // Remove active class from all tabs
                document.querySelectorAll('.day-tab').forEach(tab => {
                    tab.classList.remove('active');
                });
                
                // Add active class to clicked tab
                dayTab.classList.add('active');
                
                // Show corresponding day content
                showDayContent(day.dayNumber);
            });
            
            daySelector.appendChild(dayTab);
        });
        
        // Render Day Content Container
        const dayContentContainer = document.getElementById('dayContentContainer');
        
        // Function to show day content
        function showDayContent(dayNumber) {
            // Remove active class from all day contents
            document.querySelectorAll('.day-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Show selected day content
            const selectedContent = document.getElementById(`day-${dayNumber}`);
            if (selectedContent) {
                selectedContent.classList.add('active');
            }
        }
        
        // Function to render day content
        function renderDayContent(day) {
            const dayContent = document.createElement('div');
            dayContent.className = 'day-content';
            dayContent.id = `day-${day.dayNumber}`;
            
            // Day header
            const dayHeader = `
                <div class="day-header">
                    <div>
                        <h2>第 ${day.dayNumber} 天: ${day.date}</h2>
                        <p>住宿: ${day.accommodation}</p>
                    </div>
                    <div class="day-theme">${day.theme}</div>
                </div>
            `;
            
            // Timeline items
            let timelineItems = '';
            day.stops.forEach(stop => {
                timelineItems += `
                    <div class="timeline-item">
                        <div class="time-badge">${stop.time}</div>
                        <div class="location-card">
                            <div class="location-header">
                                <div>
                                    <h3 class="location-name">${stop.name}</h3>
                                    <p>${stop.description}</p>
                                </div>
                                <div class="location-actions">
                                    ${stop.mapLink ? `<a href="${stop.mapLink}" target="_blank" class="map-btn"><i class="fas fa-map-marker-alt"></i> 地圖</a>` : ''}
                                    ${stop.routeLink ? `<a href="${stop.routeLink}" target="_blank" class="route-btn"><i class="fas fa-route"></i> 路線</a>` : ''}
                                </div>
                            </div>
                            <div class="location-details">
                                ${stop.transport ? `<div class="detail-item"><i class="fas fa-subway"></i><span><strong>交通:</strong> ${stop.transport}</span></div>` : ''}
                                ${stop.cost ? `<div class="detail-item"><i class="fas fa-yen-sign"></i><span><strong>費用:</strong> ${stop.cost}</span></div>` : ''}
                                ${stop.coordinates ? `<div class="detail-item"><i class="fas fa-globe-asia"></i><span><strong>座標:</strong> ${stop.coordinates}</span></div>` : ''}
                                ${stop.notes ? `<div class="detail-item"><i class="fas fa-sticky-note"></i><span><strong>備註:</strong> ${stop.notes}</span></div>` : ''}
                            </div>
                            ${stop.alternatives && stop.alternatives.length > 0 ? `
                                <div class="alternatives">
                                    <h4><i class="fas fa-exchange-alt"></i> 備選方案</h4>
                                    <ul>
                                        ${stop.alternatives.map(alt => `<li>${alt}</li>`).join('')}
                                    </ul>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            });
            
            // Alternatives and checklist
            let alternativesSection = '';
            if (day.alternativesNote) {
                alternativesSection = `
                    <div class="alternatives">
                        <h4><i class="fas fa-lightbulb"></i> 彈性調整方案</h4>
                        <p>${day.alternativesNote}</p>
                    </div>
                `;
            }
            
            let checklistSection = '';
            if (day.checklist && day.checklist.length > 0) {
                checklistSection = `
                    <div class="checklist">
                        <h4><i class="fas fa-clipboard-check"></i> 一鍵檢查清單</h4>
                        <div class="checklist-items">
                            ${day.checklist.map(item => `
                                <div class="checklist-item">
                                    <input type="checkbox" id="day${day.dayNumber}-${item}">
                                    <label for="day${day.dayNumber}-${item}">${item}</label>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            // Complete day content
            dayContent.innerHTML = `
                ${dayHeader}
                <div class="timeline">
                    ${timelineItems}
                </div>
                ${alternativesSection}
                ${checklistSection}
            `;
            
            dayContentContainer.appendChild(dayContent);
        }
        
        // Render all day contents
        itineraryData.days.forEach(day => {
            renderDayContent(day);
        });
        
        // Activate first day by default
        if (document.querySelector('.day-tab')) {
            document.querySelector('.day-tab').classList.add('active');
            showDayContent(1);
        }
        
        // Print button functionality
        document.getElementById('printBtn').addEventListener('click', function(e) {
            e.preventDefault();
            window.print();
        });
        
        // Export JSON button functionality
        document.getElementById('exportBtn').addEventListener('click', function(e) {
            e.preventDefault();
            
            // Create JSON data
            const exportData = {
                tripMeta: {
                    title: "東北櫻花與文化攝影之旅 2026",
                    destination: "日本, 東北地方",
                    startDate: "2026-04-15",
                    endDate: "2026-04-21",
                    durationDays: 7,
                    travelers: 2,
                    budgetPerPersonJPY: 100000,
                    pace: "輕鬆",
                    primaryTransport: "大眾運輸 (JR, 巴士)"
                },
                days: itineraryData.days.map(day => ({
                    dayNumber: day.dayNumber,
                    date: day.date,
                    theme: day.theme,
                    accommodation: day.accommodation,
                    stops: day.stops.map(stop => ({
                        name: stop.name,
                        time: stop.time,
                        description: stop.description,
                        transport: stop.transport,
                        cost: stop.cost,
                        mapLink: stop.mapLink,
                        routeLink: stop.routeLink,
                        coordinates: stop.coordinates,
                        notes: stop.notes
                    })),
                    checklist: day.checklist
                })),
                totals: {
                    estimatedCostJPY: {
                        accommodation: 35000,
                        transport: 25000,
                        food: 30000,
                        attractions: 10000,
                        totalPerPerson: 100000
                    }
                }
            };
            
            // Convert to JSON string
            const jsonString = JSON.stringify(exportData, null, 2);
            
            // Create download link
            const blob = new Blob([jsonString], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = '東北櫻花之旅_行程.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('行程已匯出為 JSON 檔案！');
        });
        
        // Save PDF button functionality (simulated)
        document.getElementById('saveBtn').addEventListener('click', function(e) {
            e.preventDefault();
            alert('PDF 匯出功能需要伺服器端支援。您可以使用瀏覽器的「列印」功能並選擇「另存為 PDF」。');
        });
        
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html>